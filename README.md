# <center>SmartBerry üçì - Smart Home üè°</center>
*<center>SmartBerry is an openHAB environment providing multiple extensions to simplify the configuration of scenes, climate and security management.</center>*

## Documentation
Get started with SmartBerry and start to learn the fundamentals.

* [Getting Started](#getting-started)
* [Configuration](#configuration)
	* [Lights](#lights-) üí°
	* [Heating](#heating-) üî•
	* [Presence](#presence-) üëã
	* [Scenes](#scenes-) üé¨
	* [Security](#security-) üîí
	* [Timed Outlets](#timed-outlets-) ‚è±Ô∏è

### Getting Started
### Configuration
#### Lights üí°
Lights are triggered automatically in dependence to daylight and presence changes. The following equipments and points are used for a proper lights configuration.

Role|Needed equipment tags|Needed point tags|Needed custom tags
:---|:---|:---|:---
Light switchable|`Lightbulb` **or** `WallSwitch` **or** `PowerOutlet`|`Switch`|
Light measurement item||`Measurement` **and** `Light`|

Each location having "Light switchable" - items  will receive the following items in order to adjust light configuration. To adjust the light management configuration, you can adjust the items accordingly.

Item name|Group membership|Description
:---|:---|:---
Autogenerated|`gCore_Lights_DarkMode` *and corresponding location group*|Set the lighting mode in *dark* conditions. Current choices are `OFF`, `ON `, `AUTO_ON` , `UNCHANGED` or `SIMULATE`
Autogenerated|`gCore_Lights_ObscuredMode` *and corresponding location group*|Set the lighting mode in *obscured* conditions. Current choices are `OFF`, `ON `, `AUTO_ON` , `UNCHANGED` or `SIMULATE`
Autogenerated|`gCore_Lights_BrightMode` *and corresponding location group*|Set the lighting mode in *bright* conditions. Current choices are `OFF`, `ON `, `AUTO_ON` , `UNCHANGED` or `SIMULATE`

To adjust general configurations within the lights context, you can modify the following items.

Item name|Description
:---|:---
Core\_Lights\_AmbientLightCondition|Identified light conditions
Core\_Lights\_AmbientLightCondition\_LuminanceTreshold\_Obscured|Upper luminance level for obscured light conditions
Core\_Lights\_AmbientLightCondition\_LuminanceTreshold\_Dark|Upper luminance level for dark light conditions
Core\_Lights\_DefaultDuration|Minutes without presence events until lights are turned off in `AUTO_ON ` mode.
Core\_Lights\_WelcomeLight\_DarkMode|Turn this on to turn on all light switchables in `AUTO_ON` mode during *dark* light conditions when come back home
Core\_Lights\_WelcomeLight\_ObscuredMode|Turn this on to turn on all light switchables in `AUTO_ON` mode during *obscured* light conditions when come back home
Core\_Lights\_WelcomeLight\_BrightMode|Turn this on to turn on all light switchables in `AUTO_ON` mode during *bright* light conditions when come back home

#### Heating üî•
Heating items are turned off automatically, if any Contact item is set to `ON` or `OPENED`.

Role|Needed equipment tags|Needed point tags|Needed custom tags
:---|:---|:---|:---
Contact item to adjust heating state|`Door ` **or** `Window `|`OpenState`|
Thermostat mode item|`RadiatorControl `|`SetPoint`|
Temperature measurement item (for visualisation only)||`Measurement` **and** `Temperature`|

To adjust the heating management configuration, you can adjust the following items accordingly.

Item name|Description
:---|:---
Core\_Heating\_Thermostat\_ModeDefault|Set the heating mode. Current choices are `OFF`(0.0), `ON `(1.0), `ECO` (11.0) or `POWER` (15.0)

#### Presence üëã
The presence management will automatically adjust the presence state in dependence to the last presence detection events. The following items are scoped.

Role|Needed equipment tags|Needed point tags|Needed custom tags
:---|:---|:---|:---
Presence trigger item||`Presence`|

To adjust the presence management configuration, you can adjust the following presence items.

Item name|Description
:---|:---
Core_Presence|The actual presence state. Current choices are `PRESENT`, `SHORT ABSENCE` or `LONG ABSENCE`
Core\_Presence\_HoursUntilAwayShort|Set hours until presence management sets the presence state to `SHORT_ABSENCE`
Core\_Presence\_HoursUntilAwayLong|Set hours until presence management sets the presence state to `LONG_ABSENCE`

#### Scenes üé¨
Scenes allow multiple devices to be controlled with a single command. For example, in the "Arrival at home" scene, it is possible to switch on all lights and unlock the front door. 

In SmartBerry there is a preconfigured default scene named `Core_DefaultScene` with the states `PRESENT`, `SHORT ABSENCE`, `LONG ABSENCE` or `SLEEP` that applies to the following items and changes them accordingly:

Item name|Description
:---|:---
Core\_Security\_OperationState| See [security](#security) for details
Core\_Heating\_Thermostat\_ModeDefault|See [heating](#heating) for details
Core\_Lights\_DefaultDuration|See [lights](#lights) for details
Member of gCore\_Lights\_DarkMode|See [lights](#lights) for details
Member of gCore\_Lights\_BrightMode|See [lights](#lights) for details
Member of gCore\_Lights\_ObscuredMode|See [lights](#lights) for details
 
To change the items states of the scene, each scene item has the following configuration items.

Item name|Group membership|Description
:---|:---|:---
Autogenerated|`gCore_Scenes_StoreTriggers` *and corresponding location group*|Overwrite the scene state to the current states of all light switchable items (as defined in [lights](#lights)). You can use custom members by adding the list of items or groups to the metadata object of the scene item (e.g. `Core_DefaultScene`) via namespace `core` and key `customMembers`.

<!--- TODO: add documentation for context states (reset) and state triggers (gCore_Scenes_StateTriggers) -->

#### Security üîí
The security system protects your home and responds to any unauthorized activity. The following items are scoped.

Role|Needed equipment tags|Needed point tags|Needed custom tags
:---|:---|:---|:---
Assault trigger items|`Window` **or** `Door` **or** `CoreAssaultTrigger`|`OpenState` **or** `Switch`|Items that trigger the alarm, if assault detection is activated
Assault Disarmer items|`CoreAssaultDisarmer `|`OpenState` **or** `Switch`|Items that disarm the assault detection, if item state updated to `ON ` or `OPENED`
Lock closure items|`Window` **or** `Door` **or** `CoreLockClosure `|`OpenState` **or** `Switch`|Items that close a lock item within the same location
Lock items|`Lock`|`OpenState` **or** `Switch`|Lock items that may be closed by a door or window contact
Sirene items||`Alarm`|Items that are triggered after an assault detection, if assault detection is activated

To adjust general configurations within the security context, you can modify the following items.

Item name|Description
:---|:---
Core\_Security\_OperationState |Set the current assault detection state. Current choices are `OFF`, `SILENTLY` or `ON`.
Core\_Security\_SireneAutoOff|Set minutes until the siren will turn off automatically. Set to zero to disable the auto-off functionality.

#### Timed Outlets ‚è±Ô∏è
Timed outlet items switch off after a defined interval. The interval can be set individually for each item. The following items are scoped.

Role|Needed equipment tags|Needed point tags|Needed custom tags
:---|:---|:---|:---
Timed outlet item||`Switch `|`CoreTimedOutlet` (Equipment layer)

To adjust the timed outlet configuration, you can adjust the following timed outlet related items.

Item name|Group membership|Description
:---|:---|:---
Autogenerated|`gCore_TimedOutlets_ActiveDuration` *and corresponding location group*|Set minutes until corresponding timed outlet will turn off again
